<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>dir2json + Shiny â€¢ dir2json</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="dir2json + Shiny">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">dir2json</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/shiny.html">dir2json + Shiny</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/parmsam/dir2json/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>dir2json + Shiny</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/parmsam/dir2json/blob/main/vignettes/shiny.Rmd" class="external-link"><code>vignettes/shiny.Rmd</code></a></small>
      <div class="d-none name"><code>shiny.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/parmsam/dir2json" class="external-link">dir2json</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.posit.co/" class="external-link">shiny</a></span><span class="op">)</span></span></code></pre></div>
<p>You can use dir2json with Shiny to create a web application that
allows users to upload files, encode them into JSON format, and process
or download the resulting JSON file. Below is an example of how to
implement this functionality in a Shiny app.</p>
<div class="section level2">
<h2 id="shiny-example">Shiny example<a class="anchor" aria-label="anchor" href="#shiny-example"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu">fluidPage</span><span class="op">(</span></span>
<span>    <span class="fu">titlePanel</span><span class="op">(</span><span class="st">"Encode Uploaded Files to JSON"</span><span class="op">)</span>,</span>
<span>    <span class="fu">sidebarLayout</span><span class="op">(</span></span>
<span>        <span class="fu">sidebarPanel</span><span class="op">(</span></span>
<span>            <span class="fu">fileInput</span><span class="op">(</span><span class="st">"files"</span>, <span class="st">"Upload Files"</span>, multiple <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>            <span class="fu">actionButton</span><span class="op">(</span><span class="st">"encode"</span>, <span class="st">"Encode to JSON"</span><span class="op">)</span>,</span>
<span>            <span class="fu">downloadButton</span><span class="op">(</span><span class="st">"downloadJSON"</span>, <span class="st">"Download JSON"</span><span class="op">)</span></span>
<span>        <span class="op">)</span>,</span>
<span>        <span class="fu">mainPanel</span><span class="op">(</span></span>
<span>            <span class="fu">verbatimTextOutput</span><span class="op">(</span><span class="st">"jsonOutput"</span><span class="op">)</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span>,</span>
<span>    <span class="co"># Custom CSS to enable line wrapping</span></span>
<span>    <span class="va">tags</span><span class="op">$</span><span class="fu">style</span><span class="op">(</span></span>
<span>        <span class="fu">HTML</span><span class="op">(</span><span class="st">"</span></span>
<span><span class="st">            #jsonOutput {</span></span>
<span><span class="st">                white-space: pre-wrap;</span></span>
<span><span class="st">                word-wrap: break-word;</span></span>
<span><span class="st">                max-height: 400px;</span></span>
<span><span class="st">                overflow-y: auto;</span></span>
<span><span class="st">            }</span></span>
<span><span class="st">        "</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="co"># Reactive value to store the JSON data</span></span>
<span>    <span class="va">json_data</span> <span class="op">&lt;-</span> <span class="fu">reactiveVal</span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="fu">observeEvent</span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">encode</span>, <span class="op">{</span></span>
<span>        <span class="fu">req</span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">files</span><span class="op">)</span> <span class="co"># Ensure files are uploaded</span></span>
<span>        </span>
<span>        <span class="co"># Create a temporary directory to store uploaded files</span></span>
<span>        <span class="va">temp_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">temp_dir</span><span class="op">)</span></span>
<span>        </span>
<span>        <span class="co"># Copy uploaded files to the temporary directory</span></span>
<span>        <span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">files</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>            <span class="fu"><a href="https://rdrr.io/r/base/files.html" class="external-link">file.copy</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">files</span><span class="op">$</span><span class="va">datapath</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>, <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">temp_dir</span>, <span class="va">input</span><span class="op">$</span><span class="va">files</span><span class="op">$</span><span class="va">name</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="op">}</span></span>
<span>        </span>
<span>        <span class="co"># Encode the directory to JSON</span></span>
<span>        <span class="fu">json_data</span><span class="op">(</span><span class="fu"><a href="../reference/json_encode_dir.html">json_encode_dir</a></span><span class="op">(</span><span class="va">temp_dir</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="co"># Display the JSON data in the UI</span></span>
<span>    <span class="va">output</span><span class="op">$</span><span class="va">jsonOutput</span> <span class="op">&lt;-</span> <span class="fu">renderText</span><span class="op">(</span><span class="op">{</span></span>
<span>        <span class="fu">req</span><span class="op">(</span><span class="fu">json_data</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span>        <span class="fu">json_data</span><span class="op">(</span><span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="co"># Allow the user to download the JSON file</span></span>
<span>    <span class="va">output</span><span class="op">$</span><span class="va">downloadJSON</span> <span class="op">&lt;-</span> <span class="fu">downloadHandler</span><span class="op">(</span></span>
<span>        filename <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>            <span class="st">"encoded_files.json"</span></span>
<span>        <span class="op">}</span>,</span>
<span>        content <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">file</span><span class="op">)</span> <span class="op">{</span></span>
<span>            <span class="fu">req</span><span class="op">(</span><span class="fu">json_data</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span>            <span class="fu"><a href="https://rdrr.io/r/base/writeLines.html" class="external-link">writeLines</a></span><span class="op">(</span><span class="fu">json_data</span><span class="op">(</span><span class="op">)</span>, <span class="va">file</span><span class="op">)</span></span>
<span>        <span class="op">}</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">shinyApp</span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></span></code></pre></div>
</div>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sam Parmar.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer>
</div>





  </body>
</html>
